(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t,a=e.i(43476),s=e.i(71645),r=((t={}).INPUT="INPUT",t.GENERATING_IMAGES="GENERATING_IMAGES",t.SELECTION="SELECTION",t.GENERATING_VIDEOS="GENERATING_VIDEOS",t);let l=({currentStep:e,onReset:t,onResetApiKey:s})=>(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 mb-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:t,children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-white",children:(0,a.jsx)("path",{d:"M4.5 4.5a3 3 0 00-3 3v9a3 3 0 003 3h8.25a3 3 0 003-3v-9a3 3 0 00-3-3H4.5zM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.94-.94 2.56-.27 2.56 1.06v11.38c0 1.33-1.62 2-2.56 1.06z"})})}),(0,a.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Story2Video"})]}),s&&(0,a.jsxs)("button",{onClick:s,className:"text-xs text-slate-500 hover:text-slate-300 transition-colors flex items-center gap-1",title:"Reset API Key",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-3 h-3",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm1.107 11.405l3.908 3.908a.75.75 0 11-1.06 1.06l-3.908-3.908a.75.75 0 111.06-1.06zm-1.107-6.905c-1.38 0-2.5 1.12-2.5 2.5a.75.75 0 01-1.5 0c0-2.21 1.79-4 4-4a.75.75 0 010 1.5z",clipRule:"evenodd"})}),"Key"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm font-medium text-slate-400",children:[(0,a.jsx)("span",{className:e===r.INPUT||e===r.GENERATING_IMAGES?"text-indigo-400":"",children:"1. Imagine"}),(0,a.jsx)("span",{className:"text-slate-700",children:"/"}),(0,a.jsx)("span",{className:e===r.SELECTION?"text-indigo-400":"",children:"2. Select"}),(0,a.jsx)("span",{className:"text-slate-700",children:"/"}),(0,a.jsx)("span",{className:e===r.GENERATING_VIDEOS?"text-indigo-400":"",children:"3. Animate"})]})]})}),i=({progress:e,message:t})=>(0,a.jsxs)("div",{className:"w-full max-w-xl mx-auto p-6 bg-slate-800 rounded-xl shadow-lg border border-slate-700",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-indigo-400",children:t||"Processing..."}),(0,a.jsxs)("span",{className:"text-sm font-medium text-slate-400",children:[Math.round(e),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-indigo-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${e}%`}})})]}),o=({models:e,selectedModelId:t,onSelect:s})=>(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-400 mb-3",children:"Select Generation Model"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(e=>{let r=e.id===t;return(0,a.jsxs)("div",{onClick:()=>s(e.id),className:`
                relative cursor-pointer rounded-xl p-4 border transition-all duration-200
                ${r?"bg-indigo-600/20 border-indigo-500 shadow-lg shadow-indigo-500/10":"bg-slate-800/50 border-slate-700 hover:border-slate-600 hover:bg-slate-800"}
              `,children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("span",{className:`text-sm font-semibold ${r?"text-white":"text-slate-200"}`,children:e.name}),e.badge&&(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full bg-slate-700 text-slate-300",children:e.badge})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded border ${"Google"===e.provider?"border-blue-500/30 text-blue-400":"OpenAI"===e.provider?"border-green-500/30 text-green-400":"border-purple-500/30 text-purple-400"}`,children:e.provider})}),(0,a.jsx)("p",{className:"text-xs text-slate-400 leading-relaxed",children:e.description}),r&&(0,a.jsx)("div",{className:"absolute top-3 right-3 w-4 h-4 rounded-full bg-indigo-500 flex items-center justify-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-white",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},e.id)})})]}),n=({isOpen:e,onClose:t,onSave:r})=>{let[l,i]=(0,s.useState)("");if(!e)return null;let o=()=>{l.trim()&&(r(l.trim()),i(""),t())};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-xl w-full max-w-md shadow-2xl",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-white",children:"Enter API Key"}),(0,a.jsxs)("p",{className:"text-slate-400 mb-6 text-sm",children:["Please enter your Grsai API Key to continue. You can find it in your"," ",(0,a.jsx)("a",{href:"https://grsai.ai/zh/dashboard/models",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Grsai Dashboard"}),"."]}),(0,a.jsx)("input",{type:"password",value:l,onChange:e=>i(e.target.value),placeholder:"sk-...",className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyDown:e=>"Enter"===e.key&&o()}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 rounded-lg text-slate-400 hover:bg-slate-800 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:o,disabled:!l.trim(),className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Key"})]})]})})},d="https://grsai.dakka.com.cn/v1",c=()=>{let e=localStorage.getItem("grsai_api_key");return{"Content-Type":"application/json",Authorization:`Bearer ${e}`}},m=()=>{let e=localStorage.getItem("grsai_api_key");return!!(e&&e.trim())},x=e=>new Promise(t=>setTimeout(t,e)),g=async(e,t)=>{let a=0;for(;a<120;){await x(5e3);let s=await fetch(`${d}/draw/result`,{method:"POST",headers:c(),body:JSON.stringify({id:e})});if(!s.ok){console.error(`${t} polling error:`,s.statusText),a++;continue}let r=await s.json(),l=r.data?.status;if(console.log(`${t} Task ${e} status: ${l} (${r.data?.progress||0}%)`),"succeeded"===l&&(r.data?.results?.[0]?.url||r.data?.url)){let e=r.data?.results?.[0].url?.trim()||r.data?.url?.trim();return e.replace(/[`\s]/g,"")}if("failed"===l)throw Error(r.data?.error||r.data?.failure_reason||`${t} generation failed`);a++}throw Error(`${t} generation timed out`)},p=async(e,t)=>{let a=await fetch(`${d}/draw/nano-banana`,{method:"POST",headers:c(),body:JSON.stringify({prompt:e,model:t,aspectRatio:"1:1",webHook:"-1"})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error?.message||`Nano Banana init failed: ${a.statusText}`)}let s=await a.json(),r=s.data?.id;if(!r)throw Error("No task ID received from Nano Banana API");return g(r,"Nano Banana")},h=async(e,t)=>{let a=await fetch(`${d}/draw/completions`,{method:"POST",headers:c(),body:JSON.stringify({prompt:e,model:t,size:"1:1",webHook:"-1"})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error?.message||`GPT Image init failed: ${a.statusText}`)}let s=await a.json(),r=s.data?.id;if(!r)throw Error("No task ID received from GPT Image API");return g(r,"GPT Image")},u=async(e,t=20,a,s="nano-banana-pro")=>{let r=[];try{let l=[];for(let i=0;i<t;i++){let t="gpt-image-1.5"===s||"sora-image"===s?()=>h(e,s):()=>p(e,s);l.push(t().then(e=>e.startsWith("http")?fetch(e).then(e=>e.blob()).then(e=>new Promise((t,a)=>{let s=new FileReader;s.onloadend=()=>{let e=s.result,a=e.split(",");t(a.length>1?a[1]:e)},s.onerror=a,s.readAsDataURL(e)})):e).then(e=>{let t={id:crypto.randomUUID(),base64:e,mimeType:"image/png",selected:!1};return r.push(t),a(r.length),t}))}let i=await Promise.allSettled(l),o=i.filter(e=>"fulfilled"===e.status);if(0===o.length)throw i.find(e=>"rejected"===e.status).reason||Error("All image generations failed.")}catch(e){throw console.error("Image generation error:",e),e}return r},f=async(e,t,a="sora-2.0")=>{let s=a.toLowerCase().includes("veo"),r=await fetch(`${d}${s?"/video/veo":"/video/sora"}`,{method:"POST",headers:c(),body:JSON.stringify({prompt:e,model:a,image:t,duration:"5",aspectRatio:"1:1",webHook:"-1"})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error?.message||`Video generation failed: ${r.statusText}`)}let l=await r.json(),i=l.data?.id;if(!i)throw Error(`No task ID received from ${s?"VEO":"Sora"} Video API`);return g(i,s?"VEO":"Sora")},b=async(e,t)=>{if(console.log(`Generating video using model: ${t}`),t.toLowerCase().includes("veo")||t.toLowerCase().includes("sora-2")){let a=t.toLowerCase().includes("veo"),s=await fetch(`${d}${a?"/video/veo":"/video/sora"}`,{method:"POST",headers:c(),body:JSON.stringify({prompt:e,model:t,duration:"5",aspectRatio:"1:1",webHook:"-1"})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error?.message||`Video generation failed: ${s.statusText}`)}let r=await s.json(),l=r.data?.id;if(!l)throw Error(`No task ID received from ${a?"VEO":"Sora"} Video API`);return g(l,a?"VEO":"Sora")}let a=await fetch(`${d}/video/generations`,{method:"POST",headers:c(),body:JSON.stringify({model:t,prompt:e,response_format:"url"})});if(!a.ok){let s=await a.json();if(404===a.status)return v(e,t);throw Error(s.error?.message||"Video generation failed")}let s=await a.json();if(s.data&&s.data.length>0)return s.data[0].url;throw Error("No video URL returned")},v=async(e,t)=>{let a=await fetch(`${d}/images/generations`,{method:"POST",headers:c(),body:JSON.stringify({model:t,prompt:e,n:1})});if(!a.ok){let e=await a.json();throw Error(e.error?.message||"Video generation failed (fallback)")}let s=await a.json();if(s.data&&s.data.length>0)return s.data[0].url;throw Error("No video URL returned")},w=[{id:"veo3.1-pro",name:"Veo 3.1 Pro",provider:"Google",description:"High-definition video generation with cinematic quality. Supports start/end frames.",badge:"Pro"},{id:"veo3.1-fast",name:"Veo 3.1 Fast",provider:"Google",description:"Optimized for speed. Good for quick drafts and iterations.",badge:"Fast"},{id:"sora-2.0",name:"Sora 2.0",provider:"OpenAI",description:"Latest Sora model. Supports Remix and character creation.",badge:"New"},{id:"nano-banana-pro",name:"NanoBanana Pro",provider:"Google",description:"High quality image generation, great for storyboards.",badge:"Image"},{id:"nano-banana-fast",name:"NanoBanana Fast",provider:"Google",description:"Fastest version of Nano Banana.",badge:"Fast"},{id:"nano-banana",name:"NanoBanana Standard",provider:"Google",description:"Standard version of Nano Banana.",badge:"Image"},{id:"nano-banana-pro-vt",name:"NanoBanana Pro VT",provider:"Google",description:"Pro VT version for advanced consistency.",badge:"Pro"},{id:"nano-banana-pro-cl",name:"NanoBanana Pro CL",provider:"Google",description:"Pro CL version with custom styles.",badge:"Pro"},{id:"nano-banana-pro-vip",name:"NanoBanana Pro VIP",provider:"Google",description:"High priority VIP generation.",badge:"VIP"},{id:"nano-banana-pro-4k-vip",name:"NanoBanana Pro 4K VIP",provider:"Google",description:"Ultra HD 4K generation for VIPs.",badge:"4K"},{id:"gpt-image-1.5",name:"GPT Image 1.5",provider:"OpenAI",description:"Advanced image generation with strong consistency and editing.",badge:"New"},{id:"sora-image",name:"Sora Image",provider:"OpenAI",description:"Sora based image generation for high cinematic quality.",badge:"New"}];function j(){let[e,t]=(0,s.useState)(r.INPUT),[d,c]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[p,h]=(0,s.useState)("nano-banana-pro"),[v,j]=(0,s.useState)("sora-2.0"),[N,y]=(0,s.useState)(4);w.filter(e=>e.id.includes("nano-banana")||e.id.includes("gpt-image")||e.id.includes("sora-image"));let I=w.filter(e=>e.id.includes("veo")||e.id.includes("sora-2")),[S,E]=(0,s.useState)([]),[k,P]=(0,s.useState)([]),[T,G]=(0,s.useState)(0),[C,A]=(0,s.useState)({current:0,total:0}),[V,R]=(0,s.useState)(!1),[$,z]=(0,s.useState)(null),O=s.default.useRef(null),M=async e=>{let a=e.target.files;if(a&&0!==a.length)try{let e=await Promise.all(Array.from(a).map(async e=>new Promise((t,a)=>{let s=new FileReader;s.onload=()=>{let a=s.result,r=a.split(",");t({id:crypto.randomUUID(),base64:r.length>1?r[1]:a,mimeType:e.type,selected:!0,prompt:d||""})},s.onerror=a,s.readAsDataURL(e)})));E(t=>[...t,...e]),d&&g(d),t(r.SELECTION),O.current&&(O.current.value="")}catch(e){console.error("Failed to upload images:",e),alert("Failed to upload images. Please try again.")}},U=async()=>{if(d.trim()){if(!m()){z(()=>U),R(!0);return}try{t(r.GENERATING_IMAGES),G(5);let e=(await u(d,N,e=>{G(Math.min(100,Math.round(e/N*100)))},p)).map(e=>({...e,prompt:d}));E(e),g(d),t(r.SELECTION)}catch(e){console.error(e),alert(e instanceof Error?e.message:"Failed to generate images. Please try again."),t(r.INPUT)}}},B=async()=>{if(d.trim()){if(!m()){z(()=>B),R(!0);return}try{t(r.GENERATING_VIDEOS);let e=crypto.randomUUID();P([{id:e,status:"processing",prompt:d,modelUsed:p}]),A({current:0,total:1});try{let t=await b(d,p);P(a=>a.map(a=>a.id===e?{...a,status:"completed",url:t}:a))}catch(t){P(t=>t.map(t=>t.id===e?{...t,status:"failed",error:"Generation failed"}:t))}A({current:1,total:1})}catch(e){console.error(e),alert("Failed to initiate video generation."),t(r.INPUT)}}},H=S.filter(e=>e.selected).length,L=async()=>{let e=S.filter(e=>e.selected);if(0===e.length)return;t(r.GENERATING_VIDEOS);let a=e.map(e=>({id:crypto.randomUUID(),imageId:e.id,status:"pending",prompt:e.prompt||x,modelUsed:v}));P(a),A({current:0,total:a.length});let s=0;for(let t of a){let r=e.find(e=>e.id===t.imageId);if(r){P(e=>e.map(e=>e.id===t.id?{...e,status:"processing"}:e));try{let e=r.prompt||x,a=await f(e,r.base64,v);P(e=>e.map(e=>e.id===t.id?{...e,status:"completed",url:a}:e))}catch(e){P(e=>e.map(e=>e.id===t.id?{...e,status:"failed",error:"Generation failed"}:e))}A({current:++s,total:a.length})}}},_=w.find(e=>e.id===p),D=w.find(e=>e.id===v);return(0,a.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,a.jsx)(l,{currentStep:e,onReset:()=>{t(r.INPUT),E([]),P([]),c(""),g(""),G(0)},onResetApiKey:()=>{confirm("Are you sure you want to reset your API Key?")&&(localStorage.removeItem("grsai_api_key"),R(!0))}}),(0,a.jsx)(n,{isOpen:V,onClose:()=>R(!1),onSave:e=>{e&&e.trim()&&localStorage.setItem("grsai_api_key",e.trim()),$&&($(),z(null))}}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("input",{type:"file",ref:O,onChange:M,accept:"image/*",multiple:!0,className:"hidden"}),e===r.INPUT&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-8 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-2xl",children:[(0,a.jsx)("h2",{className:"text-4xl md:text-5xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-b from-white to-slate-400",children:"Turn your story into motion."}),(0,a.jsx)("p",{className:"text-lg text-slate-400",children:"Generate a storyboard of images first, or create a video directly from your text."})]}),(0,a.jsxs)("div",{className:"w-full max-w-3xl space-y-6",children:[(0,a.jsx)(o,{models:w,selectedModelId:p,onSelect:h}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-slate-400",children:"Number of Images"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex gap-1 bg-slate-800 p-1 rounded-lg border border-slate-700",children:[1,4,8].map(e=>(0,a.jsx)("button",{onClick:()=>y(e),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${N===e?"bg-indigo-600 text-white shadow-sm":"text-slate-400 hover:text-slate-200 hover:bg-slate-700"}`,children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-slate-800 p-1 px-2 rounded-lg border border-slate-700",children:[(0,a.jsx)("span",{className:"text-xs text-slate-500 font-medium",children:"Custom:"}),(0,a.jsx)("input",{type:"number",min:"1",max:"20",value:N,onChange:e=>y(Math.max(1,Math.min(20,parseInt(e.target.value)||1))),className:"w-12 bg-transparent text-sm text-white focus:outline-none text-center"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"A cinematic drone shot of a futuristic city with flying cars in a cyberpunk aesthetic...",className:"w-full h-32 bg-slate-800/50 border border-slate-700 rounded-xl p-4 text-white placeholder-slate-500 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none transition-all text-lg"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[(0,a.jsxs)("button",{onClick:U,disabled:!d.trim(),className:"flex-1 py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold text-lg transition-all shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{children:"Generate Storyboard"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H6zm9 7h-1.5v2.5h-2.5v1.5h2.5V15H15v-1.5h2.5v-1.5H15V9zm-4.5 9H9v-1.5h1.5V18zm0-2.5H9v-1.5h1.5v1.5zm0-2.5H9v-1.5h1.5V13zm-2.5 5H6v-1.5h1.5V18zm0-2.5H6v-1.5h1.5v1.5zm0-2.5H6v-1.5h1.5V13z"})})]}),(0,a.jsxs)("button",{onClick:B,disabled:!d.trim(),className:"flex-1 py-4 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-semibold text-lg transition-all shadow-lg shadow-slate-900/20 flex items-center justify-center gap-2 border border-slate-600",children:[(0,a.jsxs)("span",{children:["Quick Video with ",_?.name]}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M4.5 4.5a3 3 0 00-3 3v9a3 3 0 003 3h8.25a3 3 0 003-3v-9a3 3 0 00-3-3H4.5zM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.94-.94 2.56-.27 2.56 1.06v11.38c0 1.33-1.62 2-2.56 1.06z"})})]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("button",{onClick:()=>O.current?.click(),className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-semibold text-lg transition-all shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{children:"Upload Images to Animate"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l4.5 4.5a.75.75 0 01-1.06 1.06l-3.22-3.22V16.5a.75.75 0 01-1.5 0V4.81L8.03 8.03a.75.75 0 01-1.06-1.06l4.5-4.5zM3 15.75a.75.75 0 01.75.75v2.25a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5V16.5a.75.75 0 011.5 0v2.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V16.5a.75.75 0 01.75-.75z",clipRule:"evenodd"})})]})})]})]})]})]}),e===r.GENERATING_IMAGES&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:(0,a.jsx)(i,{progress:T,message:"Dreaming up your storyboard..."})}),e===r.SELECTION&&(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,a.jsx)("div",{className:"flex flex-col gap-6 sticky top-20 z-40 bg-slate-900/95 p-6 rounded-xl border border-slate-800 backdrop-blur-md shadow-2xl transition-all",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"1. Choose Video Model"}),(0,a.jsx)(o,{models:I,selectedModelId:v,onSelect:j})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 bg-slate-800 p-4 rounded-xl border border-slate-700",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1",children:"2. Ready to Animate"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-slate-300",children:[H," images selected"]})]}),(0,a.jsxs)("button",{onClick:L,disabled:0===H,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg font-bold transition-all shadow-lg shadow-indigo-500/20 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Generate Videos"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M4.5 4.5a3 3 0 00-3 3v9a3 3 0 003 3h8.25a3 3 0 003-3v-9a3 3 0 00-3-3H4.5zM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.94-.94 2.56-.27 2.56 1.06v11.38c0 1.33-1.62 2-2.56 1.06z"})})]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{onClick:()=>O.current?.click(),className:"flex flex-col items-center justify-center bg-slate-800/30 rounded-xl border-2 border-dashed border-slate-700 hover:border-indigo-500 hover:bg-slate-800/50 transition-all cursor-pointer group min-h-[300px]",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-700 group-hover:bg-indigo-600 flex items-center justify-center mb-4 transition-colors",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-400 group-hover:text-slate-200",children:"Add More Images"})]}),S.map(e=>(0,a.jsxs)("div",{className:`flex flex-col bg-slate-800 rounded-xl overflow-hidden border-2 transition-all duration-200 ${e.selected?"border-indigo-500 shadow-xl shadow-indigo-500/10":"border-slate-700"}`,children:[(0,a.jsxs)("div",{onClick:()=>{var t;return t=e.id,void E(e=>e.map(e=>e.id===t?{...e,selected:!e.selected}:e))},className:"relative aspect-video cursor-pointer group",children:[(0,a.jsx)("img",{src:`data:${e.mimeType};base64,${e.base64}`,alt:"Storyboard frame",className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:`absolute inset-0 bg-black/40 flex items-center justify-center transition-opacity duration-200 ${e.selected?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:(0,a.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e.selected?"bg-indigo-500 text-white shadow-lg":"bg-white/20 text-white backdrop-blur-sm"}`,children:e.selected?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z",clipRule:"evenodd"})}):(0,a.jsx)("span",{className:"text-xs font-bold",children:"SELECT"})})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Video Prompt"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.selected&&(0,a.jsx)("span",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest animate-pulse",children:"Selected"}),(0,a.jsx)("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,E(e=>e.filter(e=>e.id!==a))},className:"text-slate-500 hover:text-red-400 transition-colors",title:"Delete image",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5 0l.5 8.5a.75.75 0 101.5 0l-.5-8.5zm4.33.25a.75.75 0 00-1.5 0l.5 8.5a.75.75 0 001.5 0l-.5-8.5z",clipRule:"evenodd"})})})]})]}),(0,a.jsx)("textarea",{value:e.prompt||"",onChange:t=>{var a,s;return a=e.id,s=t.target.value,void E(e=>e.map(e=>e.id===a?{...e,prompt:s}:e))},placeholder:"Describe motion for this frame...",className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-lg p-3 text-white placeholder-slate-600 focus:ring-1 focus:ring-indigo-500 focus:border-transparent resize-none transition-all text-xs leading-relaxed"})]})]},e.id))]})]}),e===r.GENERATING_VIDEOS&&(0,a.jsxs)("div",{className:"space-y-12 animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-2xl mx-auto",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Producing your videos"}),C.current<C.total?(0,a.jsx)(i,{progress:C.current/C.total*100,message:`Rendering video ${C.current+1} of ${C.total} using ${D?.name}...`}):(0,a.jsx)("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-xl text-green-400 font-medium",children:"All videos completed!"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:k.map(e=>{let t=e.imageId?S.find(t=>t.id===e.imageId):void 0,s=w.find(t=>t.id===e.modelUsed);return(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 shadow-xl flex flex-col",children:[(0,a.jsx)("div",{className:"aspect-video relative bg-black",children:"completed"===e.status&&e.url?(0,a.jsx)("video",{src:e.url,controls:!0,className:"w-full h-full object-cover",poster:t?`data:${t.mimeType};base64,${t.base64}`:void 0}):(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)("img",{src:`data:${t.mimeType};base64,${t.base64}`,className:"w-full h-full object-cover opacity-50 blur-sm",alt:"Processing placeholder"}):(0,a.jsx)("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center opacity-50",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-slate-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4 text-center",children:["pending"===e.status&&(0,a.jsx)("span",{className:"text-slate-400 text-sm font-medium bg-slate-900/80 px-3 py-1 rounded-full",children:"Pending..."}),"processing"===e.status&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),(0,a.jsx)("span",{className:"text-indigo-400 text-sm font-medium bg-slate-900/80 px-3 py-1 rounded-full",children:"Rendering..."})]}),"failed"===e.status&&(0,a.jsx)("span",{className:"text-red-400 text-sm font-medium bg-red-900/20 px-3 py-1 rounded-full border border-red-500/20",children:"Generation Failed"})]})]})}),(0,a.jsxs)("div",{className:"p-4 flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${"completed"===e.status?"bg-green-500":"processing"===e.status?"bg-indigo-500 animate-pulse":"failed"===e.status?"bg-red-500":"bg-slate-500"}`}),(0,a.jsx)("span",{className:"text-sm font-medium text-slate-300 capitalize",children:e.status})]}),"completed"===e.status&&e.url&&(0,a.jsxs)("a",{href:e.url,download:"generated_video.mp4",target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-indigo-400 hover:text-indigo-300 flex items-center gap-1",children:["Download",(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:[(0,a.jsx)("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.955 3.129V2.75z"}),(0,a.jsx)("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,a.jsx)("span",{className:"text-[10px] font-mono text-slate-500 bg-slate-900 px-1.5 py-0.5 rounded border border-slate-800",children:s?.name||e.modelUsed})}),e.prompt&&(0,a.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2 mt-1",title:e.prompt,children:e.prompt})]})]},e.id)})})]})]})]})}e.s(["default",()=>j],52683)}]);